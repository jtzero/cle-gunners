---
type Props = {
  url: string;
  title: string;
  width: number;
  height: number;
  orientation?: string;
};

const { url, title, width, height, orientation } = Astro.props;

const isRemoteVideo = url.startsWith("http");
---

{
  (isRemoteVideo && (
    <iframe
      class="h-full w-full sm:min-h-[300px]"
      src={url}
      title={title}
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
      allowfullscreen
    />
  )) || (
    <!-- TODO: the max-h here is a temp fix -->
    <video
      class={`h-full max-h-[600px] w-full sm:min-h-[300px]`}
      src={url}
      title={title}
      width={width}
      height={height}
      controls
      playsinline
      muted
      loop
      poster={url}
      preload="metadata"
      style={`--aspect-ratio: ${width}/${height};`}
    />
  )
}
